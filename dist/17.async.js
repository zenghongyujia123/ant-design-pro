(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"6Fdr":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("+L6B");var u=l(a("2/Rp"));a("/zsF");var d=l(a("PArb")),i=l(a("pVnL")),f=l(a("lwsE")),o=l(a("W8MJ")),s=l(a("a1gu")),c=l(a("Nsbk")),p=l(a("7W2i"));a("5NDa");var m=l(a("5rEg"));a("iQDF");var _=l(a("+eQT"));a("OaEy");var y=l(a("2fM7"));a("y8nQ");var h=l(a("Vl3Y"));a("7Kak");var E,g,v,b=l(a("9yH6")),k=r(a("q1tI")),q=a("MuoO"),C=(a("LLXN"),l(a("zHco"))),Y=(l(a("CkN6")),l(a("Zpge")),l(a("wd/R"))),w=b.default.Group,x=h.default.Item,D=(y.default.Option,_.default.RangePicker,m.default.TextArea,E=(0,q.connect)(function(e){var t=e.loading,a=e.form;return{data:a.data,order_list:a.order_list,submitting:t.effects["form/jiafangcreate"]}}),g=h.default.create(),E(v=g(v=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(r))),a.state={previewImage:"",data:{},order_list:[],cardlist:[]},a.handleSubmit=function(e){var t=a.props,l=(t.dispatch,t.form);e.preventDefault(),l.validateFieldsAndScroll(function(e,t){})},a.handleRefundChange=function(e,t,l,r){var n=a.props,u=n.dispatch,d=n.form,i=n.data;"pay"!==i.refund_status&&(e.preventDefault(),d.validateFieldsAndScroll(function(e,n){if(!e)if("pay"!==l){r[t].status=l,r[t].refund_reason=n["refund_reason".concat(t)];var d="unpay";r.forEach(function(e){"pass"!=e.status&&(d="unpass")}),console.log(r),u({type:"form/update_auth_info_by_admin",payload:{refund_list:r,refund_status:d,refund_time:(0,Y.default)().format("YYYY-MM-DD HH:mm:ss"),user_id:a.props.location.query._id}})}else u({type:"form/update_auth_info_by_admin",payload:{refund_status:"pay",refund_time:(0,Y.default)().format("YYYY-MM-DD HH:mm:ss"),user_id:a.props.location.query._id}})}))},a.handleFirstRefundChange=function(e,t,l,r){var n=a.props,u=n.dispatch,d=n.form,i=n.data;"pay"!==i.first_refund_status&&(e.preventDefault(),d.validateFieldsAndScroll(function(e,n){if(!e)if("pay"!==l){r[t].status=l,r[t].refund_reason=n["first_refund_reason".concat(t)];var d="unpay";r.forEach(function(e){"pass"!=e.status&&(d="unpass")}),u({type:"form/update_auth_info_by_admin",payload:{first_refund_list:r,first_refund_status:d,first_refund_time:(0,Y.default)().format("YYYY-MM-DD HH:mm:ss"),user_id:a.props.location.query._id}})}else u({type:"form/update_auth_info_by_admin",payload:{first_refund_status:"pay",first_refund_time:(0,Y.default)().format("YYYY-MM-DD HH:mm:ss"),user_id:a.props.location.query._id}})}))},a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;this.props.location.query._id&&t({type:"form/userdetail",payload:{user_id:this.props.location.query._id},callback:function(t){var a=t.order_list,l=t.cardlist,r=void 0===l?[]:l;e.setState({order_list:a,cardlist:r})}})}},{key:"yop_auth_unbind_request",value:function(){var e=this,t=this.props,a=t.dispatch;t.form,t.data;a({type:"form/yop_auth_unbind_request",payload:{user_id:this.props.location.query._id},callback:function(){a({type:"form/userdetail",payload:{user_id:e.props.location.query._id},callback:function(t){var a=t.order_list,l=t.cardlist,r=void 0===l?[]:l;e.setState({order_list:a,cardlist:r})}})}})}},{key:"reset_user",value:function(){var e=this,t=this.props,a=t.dispatch;t.form,t.data;a({type:"form/reset_user",payload:{user_id:this.props.location.query._id},callback:function(){a({type:"form/userdetail",payload:{user_id:e.props.location.query._id},callback:function(t){var a=t.order_list,l=t.cardlist,r=void 0===l?[]:l;e.setState({order_list:a,cardlist:r})}})}})}},{key:"yop_refund_query",value:function(e,t){var a=this,l=this.props,r=l.dispatch;l.form,l.data;r({type:"form/yop_refund_query",payload:{requestno:t.requestno,user_id:this.props.location.query._id},callback:function(){r({type:"form/userdetail",payload:{user_id:a.props.location.query._id},callback:function(e){var t=e.order_list,l=e.cardlist,r=void 0===l?[]:l;a.setState({order_list:t,cardlist:r})}})}})}},{key:"yop_bindcard_pay_query_by_user",value:function(){var e=this,t=this.props,a=t.dispatch;t.form,t.data;a({type:"form/yop_bindcard_pay_query_by_user",payload:{user_id:this.props.location.query._id},callback:function(){a({type:"form/userdetail",payload:{user_id:e.props.location.query._id},callback:function(t){var a=t.order_list,l=t.cardlist,r=void 0===l?[]:l;e.setState({order_list:a,cardlist:r})}})}})}},{key:"yop_refund_request",value:function(e,t){var a=this,l=this.props,r=l.dispatch;l.form,l.data;"PAY_SUCCESS"===t.status&&r({type:"form/yop_refund_request",payload:{requestno:t.requestno,user_id:this.props.location.query._id},callback:function(){r({type:"form/userdetail",payload:{user_id:a.props.location.query._id},callback:function(e){var t=e.order_list,l=e.cardlist,r=void 0===l?[]:l;a.setState({order_list:t,cardlist:r})}})}})}},{key:"render",value:function(){var e=this,t={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},a={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}},l=this.props,r=l.submitting,f=l.data,o=this.props.form,s=o.getFieldDecorator,c=(o.getFieldValue,this.state);c.previewImage,c.order_list;return k.default.createElement(C.default,{title:"\u7528\u6237\u8be6\u60c5"},k.default.createElement(n.default,{bordered:!1},k.default.createElement(h.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},k.default.createElement(x,(0,i.default)({},t,{label:"\u7528\u6237\u540d"}),s("username",{initialValue:f.username||""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u6ce8\u518c\u65f6\u95f4"}),s("created",{initialValue:(0,Y.default)(f.created).format("YYYY-MM-DD HH:mm:ss")||""})(k.default.createElement(m.default,{disabled:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u94f6\u884c\u5361\u7528\u6237\u540d"}),s("bank_username",{initialValue:f.bank_username||""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u94f6\u884c\u5361\u53f7"}),s("bank_cardno",{initialValue:f.bank_cardno||""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u8eab\u4efd\u8bc1\u53f7"}),s("id_no",{initialValue:f.face_info?f.face_info.id_no:""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u4e59\u65b9\u6e20\u9053"}),s("parent",{initialValue:f.parent||""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u9a8c\u8bc1\u7801"}),s("sms_code",{initialValue:f.sms_code||""})(k.default.createElement(m.default,{readOnly:!0,placeholder:"\u65e0"}))),k.default.createElement(x,(0,i.default)({},t,{label:"\u767b\u9646"}),k.default.createElement(w,{value:f.sms_verify},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u4eba\u8138"}),k.default.createElement(w,{value:f.is_face_info},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u586b\u5199\u4e2a\u4eba\u8d44\u6599"}),k.default.createElement(w,{value:f.is_geren_ziliao},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u586b\u7d27\u6025\u8054\u7cfb\u4eba"}),k.default.createElement(w,{value:f.is_jinji_contract},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u7ed1\u5b9a\u94f6\u884c\u5361"}),k.default.createElement(w,{value:f.is_bank},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u9996\u4ed8"}),k.default.createElement(w,{value:f.is_evaluate_report},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u4e8c\u6b21\u4ed8\u6b3e"}),k.default.createElement(w,{value:f.is_smart_recommend},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(x,(0,i.default)({},t,{label:"\u662f\u5426\u9ed1\u540d\u5355"}),k.default.createElement(w,{value:f.is_black},k.default.createElement(b.default,{value:!0},"\u662f"),k.default.createElement(b.default,{value:!1},"\u5426"))),k.default.createElement(d.default,null,"\u94f6\u884c\u5361\u76f8\u5173"),k.default.createElement(x,(0,i.default)({},a,{style:{marginTop:32}}),k.default.createElement(u.default,{type:"danger",loading:r,onClick:function(t){e.yop_auth_unbind_request()}},"\u89e3\u7ed1\u94f6\u884c\u5361")),f.cardlist.map(function(e,t){return k.default.createElement("div",{key:t,style:{background:"#ECECEC",padding:"30px",width:"500px",float:"left"}},k.default.createElement(n.default,{title:"\u94f6\u884c\u5361-".concat(e.cardtop,"*******").concat(e.cardlast),bordered:!1},k.default.createElement("p",null,"\u94f6\u884c\u5361\u7f16\u53f7\uff1a".concat(e.bankcode)),k.default.createElement("p",null,"\u94f6\u884c\u5361\u540d\u79f0\uff1a".concat(e.cardname))))}),k.default.createElement(d.default,null,"\u8ba2\u5355\u76f8\u5173"),k.default.createElement(x,(0,i.default)({},t,{label:"\u5237\u65b0\u603b\u8ba2\u5355"}),k.default.createElement(u.default,{type:"primary",loading:r,style:{marginRight:"10PX"},onClick:function(t){e.yop_bindcard_pay_query_by_user()}},"\u5237\u65b0\u603b\u8ba2\u5355")),f.order_list.map(function(t,a){return k.default.createElement("div",{key:a,style:{background:"#ECECEC",padding:"30px",width:"500px",float:"left"}},k.default.createElement(n.default,{title:"\u8ba2\u5355\u53f7-".concat(t._id),bordered:!1},k.default.createElement("p",null,"\u6613\u5b9d\u8ba2\u5355\uff1a".concat(t.info.yborderid)),k.default.createElement("p",null,"\u8ba2\u5355\u7c7b\u578b\uff1a".concat(t.productname)),k.default.createElement("p",null,"\u8ba2\u5355\u72b6\u6001\uff1a".concat(t.status)),k.default.createElement("p",null,"\u8ba2\u5355\u91d1\u989d\uff1a".concat(t.amount)),k.default.createElement("p",null,"\u8ba2\u5355\u65e5\u671f\uff1a".concat((0,Y.default)(t.created).format("YYYY-MM-DD HH:mm:ss"))),k.default.createElement("p",null,"\u9000\u6b3e\u72b6\u6001\uff1a".concat(t.refund_status)),k.default.createElement("p",null,"\u9000\u6b3e\u63cf\u8ff0\uff1a".concat(t.refund_info?t.refund_info.errormsg:"\u65e0")),k.default.createElement(u.default,{type:"primary",loading:r,style:{marginRight:"10PX"},onClick:function(a){e.yop_refund_request(a,t)}},"\u9000\u6b3e"),k.default.createElement(u.default,{type:"primary",loading:r,onClick:function(a){e.yop_refund_query(a,t)}},"\u5237\u65b0")))}),k.default.createElement(d.default,null,"\u9996\u6b21\u6b21\u9000\u6b3e\u7533\u8bf7\u76f8\u5173 \uff08\u603b\u72b6\u6001\uff1a",f.first_refund_status,"\uff09(\u63d0\u4ea4\u65f6\u95f4\uff1a",(0,Y.default)(f.first_refund_time).format("YYYY-MM-DD HH:mm:ss"),")"),f.first_refund_list&&f.first_refund_list.length>0&&f.first_refund_list.map(function(a,l){return k.default.createElement(x,(0,i.default)({key:a.jiafang_id},t,{label:"".concat(a.name)}),k.default.createElement("img",{style:{width:"60px",height:"60px",marginRight:"10px"},src:a.logo}),k.default.createElement("img",{style:{width:"60px",height:"60px",marginRight:"10px"},onClick:function(e){return window.open(a.refund_image.replace("pjgg8ntmh.bkt.clouddn.com","image.chaoqianwang.com"))},src:a.refund_image.replace("pjgg8ntmh.bkt.clouddn.com","image.chaoqianwang.com")}),"\uff08\u5f53\u524d\u72b6\u6001\u56fe\u7247\u72b6\u6001\uff1a",a.status||"submit","\uff09",k.default.createElement(u.default,{type:"primary",style:{marginRight:"10px"},loading:r,onClick:function(t){e.handleFirstRefundChange(t,l,"pass",f.first_refund_list)}},"\u901a\u8fc7"),k.default.createElement(u.default,{type:"danger",loading:r,onClick:function(t){e.handleFirstRefundChange(t,l,"unpass",f.first_refund_list)}},"\u4e0d\u901a\u8fc7"),s("first_refund_reason".concat(l),{initialValue:a.refund_reason||""})(k.default.createElement(m.default,{placeholder:"\u65e0"})))}),k.default.createElement(x,(0,i.default)({},t,{label:"\u8c28\u614e\u70b9\u51fb\u9996\u6b21\u4ed8\u6b3e"}),"unpay"===f.first_refund_status&&k.default.createElement(u.default,{type:"primary",loading:r,onClick:function(t){e.handleFirstRefundChange(t,0,"pay",f.first_refund_list)}},"\u8bbe\u4e3a\u5df2\u6253\u6b3e")),k.default.createElement(d.default,null),k.default.createElement(d.default,null,"\u4e8c\u6b21\u9000\u6b3e\u7533\u8bf7\u76f8\u5173 \uff08\u603b\u72b6\u6001\uff1a",f.refund_status,"\uff09(\u63d0\u4ea4\u65f6\u95f4\uff1a",(0,Y.default)(f.refund_time).format("YYYY-MM-DD HH:mm:ss"),")"),f.refund_list&&f.refund_list.length>0&&f.refund_list.map(function(a,l){return k.default.createElement(x,(0,i.default)({key:a.jiafang_id},t,{label:"".concat(a.name)}),k.default.createElement("img",{style:{width:"60px",height:"60px",marginRight:"10px"},src:a.logo}),k.default.createElement("img",{style:{width:"60px",height:"60px",marginRight:"10px"},onClick:function(e){return window.open(a.refund_image.replace("pjgg8ntmh.bkt.clouddn.com","image.chaoqianwang.com"))},src:a.refund_image.replace("pjgg8ntmh.bkt.clouddn.com","image.chaoqianwang.com")}),"\uff08\u5f53\u524d\u72b6\u6001\u56fe\u7247\u72b6\u6001\uff1a",a.status||"submit","\uff09",k.default.createElement(u.default,{type:"primary",style:{marginRight:"10px"},loading:r,onClick:function(t){e.handleRefundChange(t,l,"pass",f.refund_list)}},"\u901a\u8fc7"),k.default.createElement(u.default,{type:"danger",loading:r,onClick:function(t){e.handleRefundChange(t,l,"unpass",f.refund_list)}},"\u4e0d\u901a\u8fc7"),s("refund_reason".concat(l),{initialValue:a.refund_reason||""})(k.default.createElement(m.default,{placeholder:"\u65e0"})))}),k.default.createElement(x,(0,i.default)({},t,{label:"\u8c28\u614e\u70b9\u51fb\u4e8c\u6b21\u4ed8\u6b3e"}),"unpay"===f.refund_status&&k.default.createElement(u.default,{type:"primary",loading:r,onClick:function(t){e.handleRefundChange(t,0,"pay",f.refund_list)}},"\u8bbe\u4e3a\u5df2\u6253\u6b3e")),k.default.createElement(d.default,null),"refund_status first_refund_list first_refund_status",k.default.createElement(x,(0,i.default)({},a,{style:{marginTop:32}}),k.default.createElement(u.default,{type:"danger",loading:r,onClick:function(t){e.reset_user()}},"\u91cd\u7f6e\u7528\u6237")))))}}]),t}(k.PureComponent))||v)||v),M=D;t.default=M}}]);